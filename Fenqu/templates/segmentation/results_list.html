{% extends "base.html" %}
{% block title %}分群结果{% endblock %}
{% block content %}
<div class="page-header">
  <h2><i class="bi bi-list-check"></i> 分群结果列表</h2>
  <p class="text-muted mb-0">查看所有分群任务及其结果</p>
</div>

<div class="card">
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>ID</th>
            <th>任务名称</th>
            <th>分群类型</th>
            <th>创建时间</th>
            <th>操作</th>
          </tr>
        </thead>
        <tbody>
          {% for task in tasks %}
          <tr>
            <td><strong>#{{ task.id }}</strong></td>
            <td>{{ task.task_name }}</td>
            <td>
              <span class="badge bg-{% if task.task_type == 'rule' %}primary{% elif task.task_type == 'rfm' %}success{% else %}warning{% endif %}">
                <i class="bi bi-{% if task.task_type == 'rule' %}funnel{% elif task.task_type == 'rfm' %}bar-chart{% else %}diagram-2{% endif %}"></i>
                {{ task.get_task_type_display }}
              </span>
            </td>
            <td>{{ task.created_at|date:"Y-m-d H:i:s" }}</td>
            <td>
              <a class="btn btn-sm btn-primary" href="{% url 'segmentation:result_detail' task.id %}">
                <i class="bi bi-eye"></i> 查看详情
              </a>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="5" class="text-center text-muted py-5">
              <i class="bi bi-inbox" style="font-size: 3rem;"></i>
              <p class="mt-3 mb-0">暂无分群任务</p>
              <p class="text-muted">请先创建分群任务</p>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}

